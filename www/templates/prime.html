<ion-view cache-view="false" hide-nav-bar="true" hide-back-button="true" can-swipe-back="false">

    <a ui-sref="settings" class="button button-icon icon ion-gear-a" style="position:absolute; top:15px;right:15px; color:white;"></a>

    <!--PRIMER-->
    <div class="prime-view">
        
        <div class="study">
            <div class="study-content">
                
                <!--Image-->
                <div class="study-img">
                    <img ng-show="state == 0" src="img/too-far-illustration.svg" class="animated shake" />
                    <img ng-show="state == 2" ng-src="img/too-late-illustration.svg" />
                    <img class="prime-img" ng-show="state == 3" ng-src="{{condition.primer.image}}" />
                </div>
                
                <!--Action Button-->
                <div class="study-action padding">
                    <button ng-disabled="state != 3 || disabledBtn"
                            ng-click="claim()"
                            class="button button-block button-balanced animated bounceIn">
                        <span ng-show="state == 0">TOO FAR</span>
                        <span ng-show="state == 2">TOO LATE</span>
                        <span ng-show="state == 3">RELISH IT</span>
                    </button>
                </div>

                <!--Text-->
                <div class="study-text-content">
                    <div class="study-text padding">

                        <div ng-show="state == 0">
                            <h3>Come and visit</h3>
                            <p>You are currently too far from a participating store. We’ll notify you when you’re closer.</p>
                        </div>

                        <div ng-show="state == 2">
                            <h3>Gotta be faster</h3>
                            <p>There’s a 5 minute window in which you need to claim your coupon. Try again next time!</p>
                        </div>

                        <div ng-show="state == 3">
                            <h3>{{condition.primer.title}}</h3>
                            <p>{{condition.primer.description}}</p>
                            <p>Wait five seconds to claim coupon...</p>
                        </div>

                    </div>

                </div>
            </div>
        </div>

    </div>


    <div ng-if="DEBUG" class="DEBUG" style="font-size:80%; background-color:red; position:absolute; bottom:0px; width:100vw;">
        <p style="margin:0px"><b>Target Region:</b> {{regionCoords.lat.toFixed(4)}}, {{regionCoords.lng.toFixed(4)}}</p>
        <p style="margin:0px"><b>Current:</b> {{currentCoords.lat.toFixed(4)}}, {{currentCoords.lng.toFixed(4)}}</p>
        <p style="margin:0px"><b>Dist:</b> {{dist.toFixed(4)}}m | <b>Radius:</b> {{radius.toFixed(4)}}m | <b>inRegion:</b> {{inRegion}}</p>
    </div>

</ion-view>